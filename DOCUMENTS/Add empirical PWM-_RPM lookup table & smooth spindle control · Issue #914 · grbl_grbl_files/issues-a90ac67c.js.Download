System.register(["./chunk-vendor.js","./chunk-frameworks.js"],(function(e,t){"use strict";var s,n,o,a,i,r,c,l,u,d,m,h,p,g,f,b,v,y,j,k,S,w,q,A,L,x,T,M,C,E;return{setters:[function(e){s=e.o,n=e.a,o=e.r,a=e.d,i=e._,r=e.t,c=e.g,l=e.c,u=e.C,d=e.b,m=e.e},function(e){h=e.a,p=e.o,g=e.c,f=e.f,b=e.$,v=e.a$,y=e.b0,j=e.a7,k=e.r,S=e.b1,w=e.F,q=e.n,A=e.p,L=e.b,x=e.ai,T=e.m,M=e.a1,C=e.Z,E=e._}],execute:function(){s("details-menu-selected",".js-timeline-scoping-menu",(async function(e){const t=e.detail.relatedTarget,s=t.getAttribute("data-url");let n;!function(e){const t=document.querySelector(".js-new-comment-form");if(!(t instanceof HTMLFormElement))return;const s=t.querySelector("input.js-scope-issue-timeline-input");if(!(s instanceof HTMLInputElement))return;s.value=e?"0":"1"}(t.hasAttribute("data-full-timeline"));try{n=await h(document,s)}catch(o){return}document.querySelector(".js-issue-timeline-container").replaceWith(n)}),{capture:!0}),n(".js-issue-row .js-issues-list-check:checked",{add(e){e.closest(".js-issue-row").classList.add("selected")},remove(e){e.closest(".js-issue-row").classList.remove("selected")}}),s("navigation:keydown",".js-issue-row",(function(e){"x"===e.detail.hotkey&&(!function(e){const t=e.querySelector(".js-issues-list-check");t instanceof HTMLInputElement&&g(t,!t.checked)}(e.currentTarget),e.preventDefault(),e.stopPropagation())})),p("#js-issues-search",(function(e){const t=e;t.value=t.value}));const e=new WeakMap,$=new WeakMap;n(".js-milestone-issues",{subscribe:e=>f(e,"socket:message",(async function(e){const t=e.currentTarget,s=e.detail.data,n=t.querySelector(".js-milestone-issues-container");if($.has(n))return void $.delete(n);await b();const o=document.querySelector(".js-client-uid");o instanceof HTMLInputElement&&o.value===s.client_uid||async function(e){if(v(e))return;const t=e.getAttribute("data-url"),s=await h(document,t);y(document,(()=>{e.replaceWith(s)}))}(t)}))}),o(".js-milestone-sort-form",(async function(e,t){const s=(await t.json()).json,n=e.querySelector(".js-milestone-reorder-feedback");n.textContent="",s.error?e.querySelector(".js-milestone-changed").classList.remove("d-none"):(e.querySelector(".js-timestamp").value=s.updated_at,n.textContent=n.getAttribute("data-success-text")||"")}));const F=a((function(e){const{newIndex:t,item:s}=e,n=s.closest(".js-milestone-issues-container"),o=s.getAttribute("data-id")||"",a=function(e,t){return e.querySelectorAll(".js-draggable-issue")[t]}(n,t-1),i=a&&a.getAttribute("data-id"),r=n.closest(".js-milestone-sort-form");r.querySelector(".js-item-id").value=o,r.querySelector(".js-prev-id").value=i||"",j({category:"Milestone",action:"reorder",label:"string"==typeof e.trackingLabel?e.trackingLabel:"drag-and-drop"}),$.set(n,!0),k(r)}),200);function H(e,t){F({oldIndex:void 0,item:t,newIndex:Array.from(e.querySelectorAll(".js-draggable-issue")).indexOf(t),trackingLabel:"keyboard-shortcut"}),S(t.closest(".js-navigation-container"),t)}function I(e){const t=e.currentTarget;if(!(t instanceof HTMLElement))return;const s=t.querySelector(".js-milestone-edit-cancel"),n=s.getAttribute("data-confirm-changes");n&&(w(t)?s.setAttribute("data-confirm",n):s.removeAttribute("data-confirm"))}let R;s("click",".js-draggable-issue .js-sortable-button",(async function({currentTarget:e}){const{moveWithButton:s}=await t.import("./chunk-sortable-behavior.js");s(e,e.closest(".js-draggable-issue"),F)})),s("navigation:keydown",".js-draggable-issues-container .js-draggable-issue",(function(e){const t=e.currentTarget,s=t.closest(".js-draggable-issues-container");if("J"===e.detail.hotkey){const n=t.nextElementSibling;n&&(n.after(t),H(s,t),e.preventDefault(),e.stopPropagation())}else if("K"===e.detail.hotkey){const n=t.previousElementSibling;n&&(n.before(t),H(s,t),e.preventDefault(),e.stopPropagation())}})),n(".js-draggable-issues-container",{add:async function(s){if(e.has(s))return;const{Sortable:n}=await t.import("./chunk-sortable-behavior.js"),o=n.create(s,{animation:150,item:".js-draggable-issue",handle:".js-drag-handle",onUpdate:F,chosenClass:"is-dragging"});e.set(s,o)},remove:function(t){const s=e.get(t);s&&s.destroy()}}),s("change",".js-milestone-edit-form",I),s("click",".js-milestone-edit-form",I);let D=null;function P(e){const{item:t,oldIndex:s}=e;D=t.parentNode.children[s+1]}async function W(e){const{oldIndex:t,newIndex:s,item:n}=e;if(t===s)return;const o=n.closest(".js-pinned-issues-reorder-form"),a=o.closest(".js-pinned-issues-reorder-container").querySelector(".js-pinned-issues-spinner");a.style.display="inline-block",R.option("disabled",!0);if((await fetch(o.action,{method:o.method,body:new FormData(o),headers:{"X-Requested-With":"XMLHttpRequest"}})).ok)a.style.display="none",R.option("disabled",!1);else{const e=n.parentNode;D?e.insertBefore(n,D):e.appendChild(n)}}n(".js-pinned-issues-reorder-list",{async add(e){const{Sortable:s}=await t.import("./chunk-sortable-behavior.js");R=s.create(e,{animation:150,item:".js-pinned-issue-list-item",handle:".js-pinned-issue-reorder",onUpdate:W,onStart:P,chosenClass:"is-dragging"})}}),s("submit",".js-pinned-issues-reorder-form",(function(e){e.preventDefault()})),s("click",".js-pinned-issue-list-item .js-sortable-button",(async function({currentTarget:e}){const s=e,{moveWithButton:n}=await t.import("./chunk-sortable-behavior.js");n(s,s.closest(".js-pinned-issue-list-item"),W)}));let B=null;const N=a((async function(){const e=document.querySelector(".js-quick-pull-new-branch-name"),t=e.value,s=e.getAttribute("data-generated-branch"),n=document.querySelector(".js-quick-pull-normalization-info"),o=new FormData;o.append("ref",t);const a=e.getAttribute("data-check-url"),i=e.parentElement.querySelector(".js-data-check-url-csrf");null==B||B.abort();const{signal:r}=B=new AbortController;try{const r=await fetch(a,{mode:"same-origin",method:"POST",body:o,headers:{Accept:"application/json","Scoped-CSRF-Token":i.value,"X-Requested-With":"XMLHttpRequest"}});if(r.ok){const o=await r.json();if(t!==e.value)return;const a=o.normalized_ref;if(n.innerHTML=null==o.message_html?"":o.message_html,!a){n.querySelector("code").textContent=s}null}}catch(c){}r.aborted||e.value}),200);function X(){return document.querySelectorAll(".js-template-editor").length>0}function U(){if(document.querySelectorAll(".js-template-form.is-loading").length>0)return"loading";return document.querySelectorAll(".js-template-form.is-errored").length>0?"error":"ok"}function O(){const e=document.querySelector(".js-commit-templates-form"),t=e.querySelector(".js-blob-submit"),s=document.querySelector(".js-template-commit-form-error-message"),n=document.querySelector(".js-template-commit-form-loading-message");switch(U()){case"loading":s.classList.add("d-none"),n.classList.remove("d-none"),e.setAttribute("disabled","disabled"),t.setAttribute("disabled","disabled");break;case"error":s.classList.remove("d-none"),n.classList.add("d-none"),e.setAttribute("disabled","disabled"),t.setAttribute("disabled","disabled");break;default:s.classList.add("d-none"),n.classList.add("d-none"),e.removeAttribute("disabled"),t.removeAttribute("disabled")}}async function _(e){e.classList.add("is-loading"),O();const t=e.querySelector('[name="filename"]').value,s={};for(const l of document.querySelectorAll(".js-template-form")){const e=l.querySelector('[name="filename"]').value;s[e]={};const t=new FormData(l);for(const[n,o]of t.entries())s[e][n]=o.toString()}const n=new FormData(e);n.append("current",t),n.append("templates",JSON.stringify(s));const o=await fetch(e.action,{method:"POST",body:n,headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!o.ok)return;const a=await o.json(),i=A(document,a.html);e.closest(".js-template-preview").replaceWith(i);const r=document.querySelector(".js-hidden-template-fields"),c=r.querySelector(`[data-filename="${a.filename}"]`);if(c instanceof HTMLInputElement)c.value=a.markdown;else{const e=document.createElement("input");e.type="hidden",e.name=`templates[][${a.filename}]`,e.setAttribute("data-filename",a.filename),e.value=a.markdown,r.append(e)}e.classList.remove("is-loading"),O()}function z(){for(const e of document.querySelectorAll(".js-template-form"))_(e)}n(".js-template-form .js-issue-labels",{add(e){const t=e.closest(".js-issue-template-labels-container");if(!t)return;const s=t.querySelector(".js-issue-template-labels");s.value="";for(const n of e.children){const e=n.getAttribute("data-name");e&&!s.value.includes(e)&&(""===s.value?s.value=e:s.value=`${s.value}, ${e}`)}}}),n(".js-template-form .js-issue-assignees",{add(e){const t=e.closest(".js-issue-template-assignees-container").querySelector(".js-issue-template-assignees");t.value="";for(const s of e.children){const e=s.querySelector("span");if(e){const s=e.getAttribute("data-assignee-name");s&&!t.value.includes(s)&&(""===t.value?t.value=s:t.value=`${t.value}, ${s}`)}}}}),s("change",".js-quick-pull-choice-option",(function(e){if(!X())return;const t=e.currentTarget;document.querySelector(".js-quick-pull-new-branch-name").toggleAttribute("required","quick-pull"===t.value)})),q(".js-quick-pull-new-branch-name",(function(e){if(!X())return;const t=e.target.value;document.querySelector(".js-quick-pull-target-branch").value=t,t.length&&N()})),q(".js-synced-template-input",(function(e){const t=e.target,s=t.getAttribute("data-sync");if(!s)return;const n=t.closest(".js-sync-container"),o=n.querySelectorAll(`[data-sync-with="${s}"]`),a=t.value;if(""!==a.trim()){for(const e of o)e.textContent=t.value;if("name"===s){n.querySelector(".js-sync-filename").value=(a.replace(/[^\w]/g,"-")+".md").toLowerCase()}}else for(const i of o){const e=i.getAttribute("data-sync-blank");e&&(i.innerHTML=`<span class="text-gray">${e}</span>`)}})),s("submit",".js-template-form",(function(e){e.preventDefault();_(e.currentTarget)})),s("click",".js-toggle-template-commit",(function(){const e=document.querySelector(".js-template-commit-pane");e.classList.toggle("d-none"),e.classList.contains("d-none")||z()})),s("submit",".js-commit-templates-form",(function(e){"ok"!==U()&&e.preventDefault(),O()})),s("click",".js-refresh-template-content",(async function(e){const t=e.currentTarget,s=t.closest(".js-template-form"),n=s.querySelector(".js-template-content-preview");n.innerHTML='<span class="text-gray">Loading preview...</span>';const o=s.querySelector(".js-template-content-textarea").value,a=t.getAttribute("data-markdown-preview-url");if(!a)return;const i=t.parentElement.querySelector(".js-data-markdown-preview-url-csrf"),r=new FormData;r.append("markdown",o);const c=await fetch(a,{mode:"same-origin",method:"POST",body:r,headers:{"Scoped-CSRF-Token":i.value,"X-Requested-With":"XMLHttpRequest"}});if(!c.ok)return;const l=await c.text();n.innerHTML=l})),s("click",".js-custom-template-toggle",(e=>{const t=e.target.closest(".js-template-preview"),s=!t.classList.contains("expand-preview");if(function(){const e=document.querySelectorAll(".js-template-preview");for(const t of e)t.classList.remove("expand-preview")}(),s)t.classList.add("expand-preview"),t.scrollIntoView({behavior:"smooth",block:"start"});else{_(t.querySelector(".js-template-form"))}})),s("click",".js-remove-template-button",(function(e){const t=e.target.closest(".js-template-preview"),s=t.getAttribute("data-filename"),n=document.querySelector(".js-hidden-template-fields"),o=document.querySelector(".js-toggle-template-commit"),a=n.querySelector(`[data-filename="${s}"]`);a&&a.remove(),o.disabled=!1,t.remove(),z()})),s("click",".js-edit-custom-field-header",(function(e){e.target.closest(".js-custom-field-header").classList.toggle("section-focus");document.querySelector(".js-toggle-template-commit").disabled=!1})),s("details-menu-selected",".js-add-template",(function(e){const t=document.querySelector(".js-templates-container"),s=document.querySelector(".js-toggle-template-commit"),n=e.detail.relatedTarget.value;if(!n)return;s.disabled=!1;const o=document.getElementById(n);t.append(o.content.cloneNode(!0))}),{capture:!0});const J=new WeakMap,K=new WeakMap;s("change",".js-issues-list-check",(function(){const e=!!document.querySelector(".js-issues-list-check:checked");document.querySelector("#js-issues-toolbar").classList.toggle("triage-mode",e);for(const t of document.querySelectorAll(".js-issue-triage-menu"))J.set(t,!0)})),s("toggle",".js-issue-triage-menu",(function(e){const t=e.currentTarget;t.hasAttribute("open")?function(e){if(!J.has(e))return;const t=document.querySelector(".js-triage-loader-template"),s=e.querySelector(".js-triage-deferred-content");s.innerHTML="",s.append(t.content.cloneNode(!0));const n=function(e,t){const s=new URL(e,window.location.origin),n=new URLSearchParams(s.search);for(const[o,a]of t)n.append(o,a);return s.search=n.toString(),s.toString()}(e.getAttribute("data-url"),Array.from(document.querySelectorAll(".js-issues-list-check:checked")).map((e=>[e.name,e.value])));s.querySelector("include-fragment").setAttribute("src",n),J.delete(e)}(t):async function(e){const t=e.querySelector("form");if(!K.has(t))return;!function(e,t){const s=e.closest(".js-issues-toolbar-triage");s.querySelector(".js-issue-triage-spinner").hidden=!t,s.querySelector(".js-issue-triage-error").hidden=!0}(e,!0);try{const e=await fetch(t.action,{method:t.method,body:new FormData(t),headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});if(!e.ok){const t=new Error,s=e.statusText?" "+e.statusText:"";throw t.message=`HTTP ${e.status}${s}`,t}const s=await e.json();K.delete(t),await L(s.job.url,{headers:{accept:"application/json"}}),x({url:window.location.href,container:document.querySelector("#js-repo-pjax-container"),replace:!0})}catch(s){!function(e,t){const s=e.closest(".js-issues-toolbar-triage");s.querySelector(".js-issue-triage-spinner").hidden=!0,s.querySelector(".js-issue-triage-error").hidden=!t}(e,!0)}}(t)}),{capture:!0}),s("details-menu-selected",".js-issue-triage-menu details-menu",(function(e){const t=e.detail.relatedTarget,s=t.closest("form"),n=function(e){const t="true"===e.getAttribute("aria-checked"),s=e.getAttribute("name")||e.getAttribute("data-name"),n=e.getAttribute("value")||e.getAttribute("data-value"),o=document.createElement("input");switch(o.type="hidden",o.name=s,e.getAttribute("role")){case"menuitem":case"menuitemradio":o.value=n;break;case"menuitemcheckbox":o.value=t?n:"0"}return o}(t),o=s.querySelector(".js-issues-triage-fields"),a=o.querySelector(`[name='${n.name}']`);a?a.replaceWith(n):o.append(n);K.set(s,!0)}),{capture:!0}),o(".js-undo-issue-event-form",(async(e,t)=>{await t.text();const s=e.getAttribute("action");e.remove();const n=document.querySelectorAll(`.js-undo-issue-event-form[action="${s}"]`);for(let o=0;o<n.length;o++)n[o].remove()}));const V=T((async function(e){return(await self.fetch(e,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}})).json()}));const Z=/^https?:\/\/[a-z0-9-]*\.?github.com\/([a-z0-9-]+)\/([a-z0-9-]+)\/issues\/(\d+)$/i,G=/^#\d+$/;function Q(e){return Z.test(e)}function Y(e,t){var s;if(!(e.length<2)&&(s=e,!(G.test(s)&&t.suggestions.length>0)))return Q(e)?ee("Add issue",function(e){const t=e.match(Z);return t?`${t[1]}/${t[2]}#${t[3]}`:e}(e),t.icons):ee("Create issue",e,t.icons)}function ee(e,t,s){const n=A(document,s.issue);return m`
    <li role="option">
      <span class="d-inline-block mr-1">${n}</span>
      <small>${e} "</small>${t}<small>"</small>
    </li>
  `}function te(e,t){const s=Y(e,t),n=t.suggestions.map((e=>function(e,t){const s=e.type in t?A(document,t[e.type]):"";return m`
    <li role="option" id="suggester-issue-${e.id}" data-value="${e.number}" data-title="${e.title}">
      <span class="d-inline-block mr-1">${s}</span>
      <small>#${e.number}</small> ${e.title}
    </li>
  `}(e,t.icons)));return m`
    <ul role="listbox" class="suggester-container suggester suggestions list-style-none position-absolute">
      ${n}${s}
    </ul>
  `}async function se(e,t){const s=await V(e),n=function(){const e=document.getElementById("subtasks"),t=new Set;if(e){const s=e.querySelectorAll("div[data-subtask-id]");for(const e of s){const s=e.getAttribute("data-subtask-id"),n=Number(s);isNaN(n)||t.add(n)}}return t}();return{suggestions:function(e,t){if(!t)return e;const s=/^\d+$/.test(t)?e=>function(e,t){const s=e.search(t);return s>-1?1e3-s:0}(e,new RegExp("\\b"+t)):e=>M(e,t);return C(e,(e=>{const t=function(e){return`${e.number} ${e.title.trim().toLowerCase()}`}(e),n=s(t);return n>0?{score:n,text:t}:null}),E)}(s.suggestions.filter((e=>"issue"===e.type&&!n.has(e.id))),t).slice(0,5),icons:s.icons}}let ne=class SubTasksElement extends HTMLElement{constructor(){super(...arguments),this.metadataCache={}}static get observedAttributes(){return["class"]}attributeChangedCallback(e,t,s){(null==s?void 0:s.includes("is-adding-subtask"))&&(this.hidden=!1,window.requestAnimationFrame((()=>this.inputField.focus()))),(null==s?void 0:s.includes("is-comment-editing"))&&(this.hidden=!1),(null==t?void 0:t.includes("is-comment-editing"))&&!(null==s?void 0:s.includes("is-comment-editing"))&&this.closeEditMode()}connectedCallback(){const e=this;n('[data-target="sub-tasks.container"]',{add(t){e.renderMetadata(t)}})}closeEditMode(){0===this.allSubtasks.length&&(this.hidden=!0,this.inputField.value="")}closeAddSubtask(){this.inputField.value||this.classList.contains("is-comment-editing")||(0===this.allSubtasks.length&&(this.hidden=!0),this.classList.remove("is-adding-subtask"))}markContainerAsDirty(e){if(!this.classList.contains("is-comment-editing"))return;const t=e.target.closest(".js-comment");t&&t.classList.add("is-dirty")}addSubtaskToUI(e,t){var s;if(Q(e))return;const n=this.subtaskPlaceholder.querySelector(".subtask-row").cloneNode(!0),o=n.querySelector(".subtask-index"),a=String(null===(s=this.container.querySelectorAll(".subtask-row"))||void 0===s?void 0:s.length);n.setAttribute("data-targets","sub-tasks.allSubtasks"),null==o||o.setAttribute("data-targets","sub-tasks.indexFields"),null==o||o.appendChild(document.createTextNode(a));const i=n.querySelector(".js-subtask-title-placeholder");if(null==i||i.appendChild(document.createTextNode(e)),t){const e=n.querySelector(".js-subtask-number-placeholder");null==e||e.appendChild(document.createTextNode(t))}return this.insertSubtask(n),n}insertSubtask(e){this.container.insertBefore(e,this.errorRow),this.showHeader(),requestAnimationFrame((()=>{this.inputField.value=""}))}async addSubtask(e){var t;let s,n;if("sub-tasks-suggester-value"===e.type?s=e.detail.value:(e.preventDefault(),s=this.inputField.value),this.markContainerAsDirty(e),s){if(e.detail){const{title:t,number:s}=e.detail;n=this.addSubtaskToUI(t,s)}else n=this.addSubtaskToUI(s);try{const e=new FormData(this.addForm);e.set("subtask",s);const o=await h(document,this.addForm.action,{method:this.addForm.method,body:e});if(0===this.allSubtasks.length&&this.formContainer.classList.add("Box-row"),n){const e=n.parentNode;null==e||e.replaceChild(o,n)}else{const e=null===(t=o.firstElementChild)||void 0===t?void 0:t.getAttribute("data-subtask-id");e&&this.requestMetadata(e,o.firstElementChild),this.insertSubtask(o.firstElementChild)}this.updateIndices()}catch(o){const e=o.response,t=await e.text();if(n){const e=n.querySelector(".px-3");this.showError(t,e)}else this.showError(t)}}}showError(e,t){if(e&&t){const s=document.createElement("span");s.classList.add("error","color-red-5"),s.textContent=e,t.appendChild(s)}else this.error.hidden=!1,this.error.textContent=e||""}resetError(){this.error.hidden=!0,this.error.textContent=""}updateIndices(){const e=this.indexFields.filter((e=>{var t;return!(null===(t=e.closest(".subtask-row"))||void 0===t?void 0:t.hasAttribute("hidden"))}));for(const[t,s]of e.entries())s.textContent=String(t+1)}showHeader(){this.header.hidden=!1}hideHeader(){this.header.hidden=!0}async removeSubtask(e){e.preventDefault();const t=e.target;let s;this.markContainerAsDirty(e);const n=this.removeSubtaskFromUI(t.parentElement);try{s=await fetch(t.action,{method:t.method,body:new FormData(t),headers:{accept:"application/json","X-Requested-With":"XMLHttpRequest"}})}catch(o){return void location.reload()}if(s.ok){if(n.remove(),0===this.allSubtasks.length){if(this.hideHeader(),this.formContainer.classList.remove("Box-row"),this.inputField.value)return;this.classList.contains("is-comment-editing")||(this.hidden=!0)}}else n.hidden=!1,this.showError(await s.text())}removeSubtaskFromUI(e,t=!1){if(e)return t?e.remove():e.hidden=!0,this.updateIndices(),e}removeSubtaskCallback(e){const t=e.target.closest(".subtask-row");t&&this.removeSubtaskFromUI(t,!0)}cacheMetadata(e){const t=e.querySelectorAll("[data-slot]");for(const s of t){const e=s.getAttribute("data-slot"),t=s.getAttribute("data-slot-id");t&&e&&(this.metadataCache[t]||(this.metadataCache[t]={}),this.metadataCache[t][e]=s)}}metadataLoaded(e){e.preventDefault(),this.cacheMetadata(e.detail.fragment),this.renderMetadata()}renderMetadata(e){const t=e||this.container;for(const[s,n]of Object.entries(this.metadataCache))for(const[e,o]of Object.entries(n)){const n=t.querySelector(`[data-slot="${e}"][data-slot-id="${s}"]`);n&&n.replaceWith(o.cloneNode(!0))}}async requestMetadata(e,t){const s=await h(document,`${location.pathname}/subtasks/metadata/${e}`);this.cacheMetadata(s),this.renderMetadata(t)}};i([r],ne.prototype,"formContainer",void 0),i([r],ne.prototype,"addForm",void 0),i([r],ne.prototype,"inputField",void 0),i([r],ne.prototype,"container",void 0),i([r],ne.prototype,"errorRow",void 0),i([r],ne.prototype,"header",void 0),i([r],ne.prototype,"error",void 0),i([r],ne.prototype,"subtaskPlaceholder",void 0),i([c],ne.prototype,"allSubtasks",void 0),i([c],ne.prototype,"indexFields",void 0),ne=i([l],ne);let oe=class SubTasksSuggesterElement extends HTMLElement{connectedCallback(){this.onCommit=this.onMenuSelect.bind(this),this.suggestionsURL=this.getAttribute("data-suggestions-url")||""}async onInput(){const e=this.input.value.trim();if(!e.length)return this.removeMenu();this.value=e;const t=e.startsWith("#")?e.slice(1):e;this.suggestions=await se(this.suggestionsURL,t),this.showMenu()}onKeyDown(e){"Escape"===e.key&&(this.removeMenu(),e.stopImmediatePropagation(),e.preventDefault())}onMenuSelect(e){const t=e.target;if(!(t instanceof HTMLElement))return;if(!this.comboBox)return;const s=t.getAttribute("data-value"),n=s?"#"+s:null,o=n||this.input.value,a={value:o,title:t.getAttribute("data-title")||o,number:n};!this.dispatchEvent(new CustomEvent("sub-tasks-suggester-value",{cancelable:!0,detail:a}))||(this.input.value=o,this.removeMenu(),this.input.focus())}showMenu(){this.input===document.activeElement&&(this.removeMenu(),this.menu=this.createMenu(this.value,this.suggestions),this.comboBox=new u(this.input,this.menu),this.append(this.menu),this.comboBox.start(),this.menu.addEventListener("combobox-commit",this.onCommit),this.comboBox.navigate(1))}removeMenu(){const e=this.menu,t=this.comboBox;e&&t&&(this.menu=null,this.comboBox=null,e.removeEventListener("combobox-commit",this.onCommit),t.destroy(),e.remove())}createMenu(e,t){const s=document.createElement("div");return d(te(e,t),s),s.firstElementChild}};i([r],oe.prototype,"input",void 0),oe=i([l],oe),s("click",".js-comment-add-subtasks-button",(function(e){var t;null===(t=e.currentTarget.closest(".js-comment").querySelector("#subtasks"))||void 0===t||t.classList.add("is-adding-subtask");const s=e.currentTarget.closest(".js-dropdown-details");s&&s.removeAttribute("open")})),s("click",".js-subtasks-edit-comment-form-cancel-button",(function(e){const t=e.currentTarget.closest(".js-comment").querySelector("form.js-comment-update"),s=e.currentTarget.getAttribute("data-confirm-text");if(w(t)&&!confirm(s))return!1;for(const o of t.querySelectorAll("input, textarea")){const e=o;e.value=e.defaultValue,e.classList.contains("session-resumable-canceled")&&(e.classList.add("js-session-resumable"),e.classList.remove("session-resumable-canceled"))}const n=e.currentTarget.closest(".js-comment");if(n){n.classList.remove("is-comment-editing");const e=n.querySelector("#subtasks");e&&(e.classList.remove("is-comment-editing"),n.classList.remove("is-dirty"))}}));let ae=class PagerFlowElement extends HTMLElement{constructor(){super(...arguments),this.currentPage=0}connectedCallback(){this.toggleTargets()}toggleTargets(){const e=this.currentPage+1>=this.pages.length;for(const t of this.hideOnLastPages)t.hidden=e;for(const t of this.showOnLastPages)t.hidden=!e}next(){this.pages[this.currentPage].hidden=!0,this.currentPage+=1,this.pages[this.currentPage].hidden=!1,this.toggleTargets()}};i([c],ae.prototype,"hideOnLastPages",void 0),i([c],ae.prototype,"showOnLastPages",void 0),i([c],ae.prototype,"pages",void 0),ae=i([l],ae)}}}));
//# sourceMappingURL=issues-ed5fa6b2.js.map
